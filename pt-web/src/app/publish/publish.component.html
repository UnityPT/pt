<div class="overlay" *ngIf="loading == true">
  <mat-spinner></mat-spinner>
</div>
<div class="card-container">
  <mat-card appearance="outlined" *ngIf="protocol != 'local'" (click)="browseRemote()">
    <div class="mat-card-header">
      <svg t="1680515705104" class="mat-card-icon" viewBox="0 0 1024 1024" version="1.1" p-id="5574" id="mx_n_1680515705105">
        <path
          d="M660.992 556.43648c-0.3328 1.47968-0.512 3.01056-0.512 4.5824v187.48928c0 11.3408 9.49248 21.22752 21.21216 21.22752 11.37664 0 21.21728-9.4976 21.21728-21.22752v-145.39264l211.52256 211.52256c8.59648 8.59136 21.9648 8.52992 30.24384 0.24576 8.0384-8.0384 8.17664-21.83168-0.24064-30.23872l-211.52256-211.52768H869.376c11.35104 0 21.23776-9.49248 21.23776-21.20704 0-11.37664-9.50784-21.21728-21.23776-21.21728h-187.65312c-11.35104 0-21.23776 9.4976-21.23776 21.21728-0.00512 1.54112 0.16896 3.06176 0.50688 4.52608zM957.44 191.04768c0-46.6432-37.88288-84.58752-84.608-84.58752H151.17312C104.84224 106.46016 66.56 144.3328 66.56 191.04768v509.57312c0 46.64832 37.87776 84.59776 84.61312 84.59776h466.88256v-51.75296H151.18336c-23.30624 0-32.86016-9.74848-32.86016-33.37728V191.59552c0-23.58784 9.78944-33.3824 32.86016-33.3824h721.62816c23.30624 0 32.86528 9.7536 32.86528 33.3824v296.66304H957.44m-471.22944 296.96512h51.7632v84.8384h-51.7632v-84.8384z m261.77024 106.64448a25.67168 25.67168 0 0 1-25.67168 25.67168H306.8928a25.67168 25.67168 0 1 1 0-51.34848h415.41632a25.68192 25.68192 0 0 1 25.67168 25.6768z"
          fill="#009BC8"
          p-id="5575"
        ></path>
      </svg>
      <div class="comment-container">
        <div>从远端发布</div>
        <div class="comment">文件在 qBittorrent 服务器上</div>
      </div>
    </div>
    <div class="mat-card-content blue">选择文件夹</div>
  </mat-card>
  <mat-card appearance="outlined" (click)="openFolderSelecter()">
    <div class="mat-card-header">
      <svg t="1680515810155" class="mat-card-icon" viewBox="0 0 1024 1024" version="1.1" p-id="6589" width="65" height="65">
        <path
          d="M524.288 245.76c-4.096-4.096-8.192-4.096-12.288-4.096S499.712 241.664 499.712 245.76l-81.92 81.92C413.696 327.68 409.6 331.776 409.6 339.968c0 12.288 8.192 20.48 20.48 20.48 4.096 0 12.288-4.096 12.288-4.096L491.52 307.2l0 233.472c0 12.288 8.192 20.48 20.48 20.48 12.288 0 20.48-8.192 20.48-20.48L532.48 307.2l45.056 45.056c4.096 4.096 8.192 4.096 12.288 4.096 12.288 0 20.48-8.192 20.48-20.48 0-4.096-4.096-12.288-4.096-12.288L524.288 245.76zM872.448 77.824 151.552 77.824c-45.056 0-81.92 36.864-81.92 81.92l0 602.112c0 45.056 36.864 81.92 81.92 81.92l282.624 0 0 81.92L372.736 925.696c-12.288 0-20.48 8.192-20.48 20.48 0 12.288 8.192 20.48 20.48 20.48l61.44 0 159.744 0 61.44 0c12.288 0 20.48-8.192 20.48-20.48 0-12.288-8.192-20.48-20.48-20.48l-61.44 0 0-81.92 282.624 0c45.056 0 81.92-36.864 81.92-81.92L958.464 159.744C954.368 114.688 917.504 77.824 872.448 77.824zM552.96 921.6l-81.92 0 0-81.92 81.92 0L552.96 921.6zM913.408 761.856c0 20.48-16.384 40.96-40.96 40.96l-282.624 0-159.744 0L151.552 802.816c-20.48 0-40.96-16.384-40.96-40.96l0-40.96 802.816 0L913.408 761.856zM913.408 679.936 110.592 679.936 110.592 159.744c0-20.48 16.384-40.96 40.96-40.96l720.896 0c20.48 0 40.96 16.384 40.96 40.96L913.408 679.936z"
          fill="#00A5A3"
          p-id="6590"
        ></path>
      </svg>
      <div class="comment-container">
        <div>从本地发布</div>
        <div class="comment">文件在本机</div>
      </div>
    </div>
    <div class="mat-card-content green">
      选择文件夹
      <!--      <input id='localpublish' #dir type='file' webkitdirectory (change)='publish(dir.files)' >-->
    </div>
  </mat-card>
</div>
<table mat-table [dataSource]="dataSource" [hidden]="!dataSource.length">
  <!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->

  <!-- Position Column -->
  <ng-container matColumnDef="file">
    <th mat-header-cell *matHeaderCellDef>文件</th>
    <td mat-cell *matCellDef="let element">{{ element.file }}</td>
  </ng-container>

  <!-- Name Column -->
  <ng-container matColumnDef="version_id">
    <th mat-header-cell *matHeaderCellDef>资源ID</th>
    <td mat-cell *matCellDef="let element">{{ element.version_id }}</td>
  </ng-container>

  <!-- Weight Column -->
  <ng-container matColumnDef="create_torrent">
    <th mat-header-cell *matHeaderCellDef>制作种子</th>
    <td mat-cell *matCellDef="let element" [ngSwitch]="element.create_torrent">
      <mat-icon *ngSwitchCase="'downloading'">download</mat-icon>
      <mat-icon *ngSwitchCase="'downloaded'">done</mat-icon>
      <mat-icon *ngSwitchCase="'creating'">pending</mat-icon>
      <mat-icon *ngSwitchCase="'uploading'">upload</mat-icon>
      <mat-icon *ngSwitchCase="'uploaded'">done</mat-icon>
      <mat-icon *ngSwitchCase="'restart'">redo</mat-icon>
      <mat-icon *ngSwitchCase="'conflict'">clear</mat-icon>
    </td>
  </ng-container>

  <!-- Symbol Column -->
  <ng-container matColumnDef="qBittorrent">
    <th mat-header-cell *matHeaderCellDef>qb</th>
    <td mat-cell *matCellDef="let element" [ngSwitch]="element.qBittorrent">
      <mat-icon *ngSwitchCase="'adding'">pending</mat-icon>
      <mat-icon *ngSwitchCase="'added'">done</mat-icon>
      <ng-container *ngSwitchCase="'skipped'">跳过</ng-container>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
